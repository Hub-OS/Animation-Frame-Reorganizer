{"mappings":"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","sources":["node_modules/@parcel/runtime-browser-hmr/lib/runtime-08c80f7882480926.js","src/index.ts","src/boomsheets-animations.ts","node_modules/quote-unquote/index.js","node_modules/@parcel/transformer-js/src/esmodule-helpers.js","src/file-loading.ts","src/input-sheets.ts","src/frame-organizer-workspace.ts","node_modules/bin-pack/index.js","node_modules/bin-pack/packer.growing.js","src/group-frames.ts","src/rect.ts"],"sourcesContent":["var HMR_HOST = null;var HMR_PORT = null;var HMR_SECURE = false;var HMR_ENV_HASH = \"d6ea1d42532a7575\";module.bundle.HMR_BUNDLE_ID = \"5c1b77e3b71e74eb\";\"use strict\";\n\n/* global HMR_HOST, HMR_PORT, HMR_ENV_HASH, HMR_SECURE, chrome, browser, __parcel__import__, __parcel__importScripts__, ServiceWorkerGlobalScope */\n/*::\nimport type {\n  HMRAsset,\n  HMRMessage,\n} from '@parcel/reporter-dev-server/src/HMRServer.js';\ninterface ParcelRequire {\n  (string): mixed;\n  cache: {|[string]: ParcelModule|};\n  hotData: {|[string]: mixed|};\n  Module: any;\n  parent: ?ParcelRequire;\n  isParcelRequire: true;\n  modules: {|[string]: [Function, {|[string]: string|}]|};\n  HMR_BUNDLE_ID: string;\n  root: ParcelRequire;\n}\ninterface ParcelModule {\n  hot: {|\n    data: mixed,\n    accept(cb: (Function) => void): void,\n    dispose(cb: (mixed) => void): void,\n    // accept(deps: Array<string> | string, cb: (Function) => void): void,\n    // decline(): void,\n    _acceptCallbacks: Array<(Function) => void>,\n    _disposeCallbacks: Array<(mixed) => void>,\n  |};\n}\ninterface ExtensionContext {\n  runtime: {|\n    reload(): void,\n    getURL(url: string): string;\n    getManifest(): {manifest_version: number, ...};\n  |};\n}\ndeclare var module: {bundle: ParcelRequire, ...};\ndeclare var HMR_HOST: string;\ndeclare var HMR_PORT: string;\ndeclare var HMR_ENV_HASH: string;\ndeclare var HMR_SECURE: boolean;\ndeclare var chrome: ExtensionContext;\ndeclare var browser: ExtensionContext;\ndeclare var __parcel__import__: (string) => Promise<void>;\ndeclare var __parcel__importScripts__: (string) => Promise<void>;\ndeclare var globalThis: typeof self;\ndeclare var ServiceWorkerGlobalScope: Object;\n*/\nvar OVERLAY_ID = '__parcel__error__overlay__';\nvar OldModule = module.bundle.Module;\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData[moduleName],\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n  module.bundle.hotData[moduleName] = undefined;\n}\nmodule.bundle.Module = Module;\nmodule.bundle.hotData = {};\nvar checkedAssets /*: {|[string]: boolean|} */, assetsToDispose /*: Array<[ParcelRequire, string]> */, assetsToAccept /*: Array<[ParcelRequire, string]> */;\n\nfunction getHostname() {\n  return HMR_HOST || (location.protocol.indexOf('http') === 0 ? location.hostname : 'localhost');\n}\nfunction getPort() {\n  return HMR_PORT || location.port;\n}\n\n// eslint-disable-next-line no-redeclare\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = getHostname();\n  var port = getPort();\n  var protocol = HMR_SECURE || location.protocol == 'https:' && !/localhost|127.0.0.1|0.0.0.0/.test(hostname) ? 'wss' : 'ws';\n  var ws;\n  try {\n    ws = new WebSocket(protocol + '://' + hostname + (port ? ':' + port : '') + '/');\n  } catch (err) {\n    if (err.message) {\n      console.error(err.message);\n    }\n    ws = {};\n  }\n\n  // Web extension context\n  var extCtx = typeof browser === 'undefined' ? typeof chrome === 'undefined' ? null : chrome : browser;\n\n  // Safari doesn't support sourceURL in error stacks.\n  // eval may also be disabled via CSP, so do a quick check.\n  var supportsSourceURL = false;\n  try {\n    (0, eval)('throw new Error(\"test\"); //# sourceURL=test.js');\n  } catch (err) {\n    supportsSourceURL = err.stack.includes('test.js');\n  }\n\n  // $FlowFixMe\n  ws.onmessage = async function (event /*: {data: string, ...} */) {\n    checkedAssets = {} /*: {|[string]: boolean|} */;\n    assetsToAccept = [];\n    assetsToDispose = [];\n    var data /*: HMRMessage */ = JSON.parse(event.data);\n    if (data.type === 'update') {\n      // Remove error overlay if there is one\n      if (typeof document !== 'undefined') {\n        removeErrorOverlay();\n      }\n      let assets = data.assets.filter(asset => asset.envHash === HMR_ENV_HASH);\n\n      // Handle HMR Update\n      let handled = assets.every(asset => {\n        return asset.type === 'css' || asset.type === 'js' && hmrAcceptCheck(module.bundle.root, asset.id, asset.depsByBundle);\n      });\n      if (handled) {\n        console.clear();\n\n        // Dispatch custom event so other runtimes (e.g React Refresh) are aware.\n        if (typeof window !== 'undefined' && typeof CustomEvent !== 'undefined') {\n          window.dispatchEvent(new CustomEvent('parcelhmraccept'));\n        }\n        await hmrApplyUpdates(assets);\n\n        // Dispose all old assets.\n        let processedAssets = {} /*: {|[string]: boolean|} */;\n        for (let i = 0; i < assetsToDispose.length; i++) {\n          let id = assetsToDispose[i][1];\n          if (!processedAssets[id]) {\n            hmrDispose(assetsToDispose[i][0], id);\n            processedAssets[id] = true;\n          }\n        }\n\n        // Run accept callbacks. This will also re-execute other disposed assets in topological order.\n        processedAssets = {};\n        for (let i = 0; i < assetsToAccept.length; i++) {\n          let id = assetsToAccept[i][1];\n          if (!processedAssets[id]) {\n            hmrAccept(assetsToAccept[i][0], id);\n            processedAssets[id] = true;\n          }\n        }\n      } else fullReload();\n    }\n    if (data.type === 'error') {\n      // Log parcel errors to console\n      for (let ansiDiagnostic of data.diagnostics.ansi) {\n        let stack = ansiDiagnostic.codeframe ? ansiDiagnostic.codeframe : ansiDiagnostic.stack;\n        console.error('🚨 [parcel]: ' + ansiDiagnostic.message + '\\n' + stack + '\\n\\n' + ansiDiagnostic.hints.join('\\n'));\n      }\n      if (typeof document !== 'undefined') {\n        // Render the fancy html overlay\n        removeErrorOverlay();\n        var overlay = createErrorOverlay(data.diagnostics.html);\n        // $FlowFixMe\n        document.body.appendChild(overlay);\n      }\n    }\n  };\n  ws.onerror = function (e) {\n    if (e.message) {\n      console.error(e.message);\n    }\n  };\n  ws.onclose = function () {\n    console.warn('[parcel] 🚨 Connection to the HMR server was lost');\n  };\n}\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n    console.log('[parcel] ✨ Error resolved');\n  }\n}\nfunction createErrorOverlay(diagnostics) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n  let errorHTML = '<div style=\"background: black; opacity: 0.85; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; font-family: Menlo, Consolas, monospace; z-index: 9999;\">';\n  for (let diagnostic of diagnostics) {\n    let stack = diagnostic.frames.length ? diagnostic.frames.reduce((p, frame) => {\n      return `${p}\n<a href=\"/__parcel_launch_editor?file=${encodeURIComponent(frame.location)}\" style=\"text-decoration: underline; color: #888\" onclick=\"fetch(this.href); return false\">${frame.location}</a>\n${frame.code}`;\n    }, '') : diagnostic.stack;\n    errorHTML += `\n      <div>\n        <div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">\n          🚨 ${diagnostic.message}\n        </div>\n        <pre>${stack}</pre>\n        <div>\n          ${diagnostic.hints.map(hint => '<div>💡 ' + hint + '</div>').join('')}\n        </div>\n        ${diagnostic.documentation ? `<div>📝 <a style=\"color: violet\" href=\"${diagnostic.documentation}\" target=\"_blank\">Learn more</a></div>` : ''}\n      </div>\n    `;\n  }\n  errorHTML += '</div>';\n  overlay.innerHTML = errorHTML;\n  return overlay;\n}\nfunction fullReload() {\n  if ('reload' in location) {\n    location.reload();\n  } else if (extCtx && extCtx.runtime && extCtx.runtime.reload) {\n    extCtx.runtime.reload();\n  }\n}\nfunction getParents(bundle, id) /*: Array<[ParcelRequire, string]> */{\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n  var parents = [];\n  var k, d, dep;\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || Array.isArray(dep) && dep[dep.length - 1] === id) {\n        parents.push([bundle, k]);\n      }\n    }\n  }\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n  return parents;\n}\nfunction updateLink(link) {\n  var href = link.getAttribute('href');\n  if (!href) {\n    return;\n  }\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    if (link.parentNode !== null) {\n      // $FlowFixMe\n      link.parentNode.removeChild(link);\n    }\n  };\n  newLink.setAttribute('href',\n  // $FlowFixMe\n  href.split('?')[0] + '?' + Date.now());\n  // $FlowFixMe\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      // $FlowFixMe[incompatible-type]\n      var href /*: string */ = links[i].getAttribute('href');\n      var hostname = getHostname();\n      var servedFromHMRServer = hostname === 'localhost' ? new RegExp('^(https?:\\\\/\\\\/(0.0.0.0|127.0.0.1)|localhost):' + getPort()).test(href) : href.indexOf(hostname + ':' + getPort());\n      var absolute = /^https?:\\/\\//i.test(href) && href.indexOf(location.origin) !== 0 && !servedFromHMRServer;\n      if (!absolute) {\n        updateLink(links[i]);\n      }\n    }\n    cssTimeout = null;\n  }, 50);\n}\nfunction hmrDownload(asset) {\n  if (asset.type === 'js') {\n    if (typeof document !== 'undefined') {\n      let script = document.createElement('script');\n      script.src = asset.url + '?t=' + Date.now();\n      if (asset.outputFormat === 'esmodule') {\n        script.type = 'module';\n      }\n      return new Promise((resolve, reject) => {\n        var _document$head;\n        script.onload = () => resolve(script);\n        script.onerror = reject;\n        (_document$head = document.head) === null || _document$head === void 0 || _document$head.appendChild(script);\n      });\n    } else if (typeof importScripts === 'function') {\n      // Worker scripts\n      if (asset.outputFormat === 'esmodule') {\n        return __parcel__import__(asset.url + '?t=' + Date.now());\n      } else {\n        return new Promise((resolve, reject) => {\n          try {\n            __parcel__importScripts__(asset.url + '?t=' + Date.now());\n            resolve();\n          } catch (err) {\n            reject(err);\n          }\n        });\n      }\n    }\n  }\n}\nasync function hmrApplyUpdates(assets) {\n  global.parcelHotUpdate = Object.create(null);\n  let scriptsToRemove;\n  try {\n    // If sourceURL comments aren't supported in eval, we need to load\n    // the update from the dev server over HTTP so that stack traces\n    // are correct in errors/logs. This is much slower than eval, so\n    // we only do it if needed (currently just Safari).\n    // https://bugs.webkit.org/show_bug.cgi?id=137297\n    // This path is also taken if a CSP disallows eval.\n    if (!supportsSourceURL) {\n      let promises = assets.map(asset => {\n        var _hmrDownload;\n        return (_hmrDownload = hmrDownload(asset)) === null || _hmrDownload === void 0 ? void 0 : _hmrDownload.catch(err => {\n          // Web extension fix\n          if (extCtx && extCtx.runtime && extCtx.runtime.getManifest().manifest_version == 3 && typeof ServiceWorkerGlobalScope != 'undefined' && global instanceof ServiceWorkerGlobalScope) {\n            extCtx.runtime.reload();\n            return;\n          }\n          throw err;\n        });\n      });\n      scriptsToRemove = await Promise.all(promises);\n    }\n    assets.forEach(function (asset) {\n      hmrApply(module.bundle.root, asset);\n    });\n  } finally {\n    delete global.parcelHotUpdate;\n    if (scriptsToRemove) {\n      scriptsToRemove.forEach(script => {\n        if (script) {\n          var _document$head2;\n          (_document$head2 = document.head) === null || _document$head2 === void 0 || _document$head2.removeChild(script);\n        }\n      });\n    }\n  }\n}\nfunction hmrApply(bundle /*: ParcelRequire */, asset /*:  HMRAsset */) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n  if (asset.type === 'css') {\n    reloadCSS();\n  } else if (asset.type === 'js') {\n    let deps = asset.depsByBundle[bundle.HMR_BUNDLE_ID];\n    if (deps) {\n      if (modules[asset.id]) {\n        // Remove dependencies that are removed and will become orphaned.\n        // This is necessary so that if the asset is added back again, the cache is gone, and we prevent a full page reload.\n        let oldDeps = modules[asset.id][1];\n        for (let dep in oldDeps) {\n          if (!deps[dep] || deps[dep] !== oldDeps[dep]) {\n            let id = oldDeps[dep];\n            let parents = getParents(module.bundle.root, id);\n            if (parents.length === 1) {\n              hmrDelete(module.bundle.root, id);\n            }\n          }\n        }\n      }\n      if (supportsSourceURL) {\n        // Global eval. We would use `new Function` here but browser\n        // support for source maps is better with eval.\n        (0, eval)(asset.output);\n      }\n\n      // $FlowFixMe\n      let fn = global.parcelHotUpdate[asset.id];\n      modules[asset.id] = [fn, deps];\n    } else if (bundle.parent) {\n      hmrApply(bundle.parent, asset);\n    }\n  }\n}\nfunction hmrDelete(bundle, id) {\n  let modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n  if (modules[id]) {\n    // Collect dependencies that will become orphaned when this module is deleted.\n    let deps = modules[id][1];\n    let orphans = [];\n    for (let dep in deps) {\n      let parents = getParents(module.bundle.root, deps[dep]);\n      if (parents.length === 1) {\n        orphans.push(deps[dep]);\n      }\n    }\n\n    // Delete the module. This must be done before deleting dependencies in case of circular dependencies.\n    delete modules[id];\n    delete bundle.cache[id];\n\n    // Now delete the orphans.\n    orphans.forEach(id => {\n      hmrDelete(module.bundle.root, id);\n    });\n  } else if (bundle.parent) {\n    hmrDelete(bundle.parent, id);\n  }\n}\nfunction hmrAcceptCheck(bundle /*: ParcelRequire */, id /*: string */, depsByBundle /*: ?{ [string]: { [string]: string } }*/) {\n  if (hmrAcceptCheckOne(bundle, id, depsByBundle)) {\n    return true;\n  }\n\n  // Traverse parents breadth first. All possible ancestries must accept the HMR update, or we'll reload.\n  let parents = getParents(module.bundle.root, id);\n  let accepted = false;\n  while (parents.length > 0) {\n    let v = parents.shift();\n    let a = hmrAcceptCheckOne(v[0], v[1], null);\n    if (a) {\n      // If this parent accepts, stop traversing upward, but still consider siblings.\n      accepted = true;\n    } else {\n      // Otherwise, queue the parents in the next level upward.\n      let p = getParents(module.bundle.root, v[1]);\n      if (p.length === 0) {\n        // If there are no parents, then we've reached an entry without accepting. Reload.\n        accepted = false;\n        break;\n      }\n      parents.push(...p);\n    }\n  }\n  return accepted;\n}\nfunction hmrAcceptCheckOne(bundle /*: ParcelRequire */, id /*: string */, depsByBundle /*: ?{ [string]: { [string]: string } }*/) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n  if (depsByBundle && !depsByBundle[bundle.HMR_BUNDLE_ID]) {\n    // If we reached the root bundle without finding where the asset should go,\n    // there's nothing to do. Mark as \"accepted\" so we don't reload the page.\n    if (!bundle.parent) {\n      return true;\n    }\n    return hmrAcceptCheck(bundle.parent, id, depsByBundle);\n  }\n  if (checkedAssets[id]) {\n    return true;\n  }\n  checkedAssets[id] = true;\n  var cached = bundle.cache[id];\n  assetsToDispose.push([bundle, id]);\n  if (!cached || cached.hot && cached.hot._acceptCallbacks.length) {\n    assetsToAccept.push([bundle, id]);\n    return true;\n  }\n}\nfunction hmrDispose(bundle /*: ParcelRequire */, id /*: string */) {\n  var cached = bundle.cache[id];\n  bundle.hotData[id] = {};\n  if (cached && cached.hot) {\n    cached.hot.data = bundle.hotData[id];\n  }\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData[id]);\n    });\n  }\n  delete bundle.cache[id];\n}\nfunction hmrAccept(bundle /*: ParcelRequire */, id /*: string */) {\n  // Execute the module.\n  bundle(id);\n\n  // Run the accept callbacks in the new version of the module.\n  var cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      var assetsToAlsoAccept = cb(function () {\n        return getParents(module.bundle.root, id);\n      });\n      if (assetsToAlsoAccept && assetsToAccept.length) {\n        assetsToAlsoAccept.forEach(function (a) {\n          hmrDispose(a[0], a[1]);\n        });\n\n        // $FlowFixMe[method-unbinding]\n        assetsToAccept.push.apply(assetsToAccept, assetsToAlsoAccept);\n      }\n    });\n  }\n}","import { parseAnimationsText } from \"./boomsheets-animations\";\nimport { loadImageFile, loadTextFile } from \"./file-loading\";\nimport FrameOrganizerWorkspace from \"./frame-organizer-workspace\";\nimport { InputSheet, resolveSingleErrorMessage } from \"./input-sheets\";\n\nconst canvas = document.querySelector(\"#input canvas\") as HTMLCanvasElement;\nconst workspace = new FrameOrganizerWorkspace(canvas);\nconst pendingSheet: InputSheet = {};\n\nfunction logError(error) {\n  console.error(error);\n  alert(error);\n}\n\ndocument.getElementById(\"bake-button\")!.onclick = function () {\n  const canvas = document.querySelector(\"#output canvas\") as HTMLCanvasElement;\n  const textarea = document.querySelector(\n    \"#output textarea\"\n  ) as HTMLTextAreaElement;\n\n  try {\n    workspace.renderOutput(canvas);\n    textarea.value = workspace.serializeSheet();\n  } catch (error) {\n    logError(error);\n  }\n};\n\ndocument.body.addEventListener(\"dragover\", (event) => event.preventDefault());\ndocument.body.addEventListener(\"drop\", (event) => {\n  const items = event.dataTransfer?.items;\n\n  if (!items) {\n    return;\n  }\n\n  event.preventDefault();\n\n  const files: File[] = [];\n\n  for (const item of items) {\n    const file = item.getAsFile();\n\n    if (file) {\n      files.push(file);\n    }\n  }\n\n  loadFiles(files)\n    .catch(logError)\n    .finally(() => {\n      const errorMessage = resolveSingleErrorMessage(pendingSheet);\n\n      const errorElement = document.querySelector(\n        \"#input .error-text\"\n      )! as HTMLDivElement;\n\n      errorElement.innerText = errorMessage || \"\";\n\n      if (!errorMessage) {\n        workspace.loadSheet(pendingSheet);\n      }\n    });\n});\n\nasync function loadFiles(files: File[]) {\n  for (const file of files) {\n    if (file.name.endsWith(\".png\")) {\n      try {\n        pendingSheet.image = await loadImageFile(file);\n        pendingSheet.imageError = undefined;\n      } catch (error) {\n        console.error(error);\n        pendingSheet.imageError = error!.toString();\n      }\n    } else if (file.name.endsWith(\".animation\")) {\n      try {\n        const text = await loadTextFile(file);\n\n        pendingSheet.animations = parseAnimationsText(text);\n        pendingSheet.animationError = undefined;\n      } catch (error) {\n        console.error(error);\n        pendingSheet.animationError = error!.toString();\n      }\n    }\n  }\n}\n","import { double as quote, unquote } from \"quote-unquote\";\n\nexport type BoomSheetsPoint = {\n  label: string;\n  x: number;\n  y: number;\n};\n\nexport type BoomSheetsFrame = {\n  x: number;\n  y: number;\n  w: number;\n  h: number;\n  originx: number;\n  originy: number;\n  flipx: number;\n  flipy: number;\n  duration: string;\n  points: BoomSheetsPoint[];\n};\n\nexport type BoomSheetsAnimation = {\n  state: string;\n  frames: BoomSheetsFrame[];\n};\n\ntype Attributes = { [key: string]: string };\nconst nonSpaceRegex = /\\S/g;\nconst keyEndRegex = /[\\s=]/g;\n\nfunction matchGRegexFrom(\n  text: string,\n  regex: RegExp,\n  index: number\n): RegExpMatchArray | null {\n  regex.lastIndex = index;\n  return regex.exec(text);\n}\n\nfunction stringCharIsEscaped(text: string, index: number): boolean {\n  let escaped = false;\n\n  while (index > 0) {\n    index -= 1;\n\n    if (text[index] != \"\\\\\") {\n      break;\n    }\n\n    escaped = !escaped;\n  }\n\n  return escaped;\n}\n\nfunction findClosingQuote(text: string, index: number): number {\n  // search for non escaped quote\n  while (true) {\n    if ((index = text.indexOf('\"', index)) < 0) {\n      return -1;\n    }\n\n    if (!stringCharIsEscaped(text, index)) {\n      break;\n    }\n\n    index += 1;\n  }\n\n  return index;\n}\n\nfunction parseAttributes(line: string, lineNumber: number): Attributes {\n  const attributes: Attributes = {};\n\n  let index = line.indexOf(\" \");\n\n  if (index < 0) {\n    // no attributes\n    return attributes;\n  }\n\n  let match: RegExpMatchArray | null;\n\n  while ((match = matchGRegexFrom(line, nonSpaceRegex, index))) {\n    index = match.index!;\n\n    // find key end\n    match = matchGRegexFrom(line, keyEndRegex, index);\n\n    if (!match) {\n      throw new Error(\n        `Unexpected \"${line.slice(index)}\" on line ${lineNumber}`\n      );\n    }\n\n    const key = line.slice(index, match.index!);\n\n    // find \"=\"\n    const eqIndex = line.indexOf(\"=\", match.index);\n\n    if (eqIndex < 0) {\n      throw new Error(`Attribute is missing \"=\" on line ${lineNumber}`);\n    }\n\n    // find value start\n    match = matchGRegexFrom(line, nonSpaceRegex, eqIndex + 1);\n\n    if (!match) {\n      throw new Error(`Attribute is missing value on line ${lineNumber}`);\n    }\n\n    // find value end\n    let valueStart = match.index!;\n    let value = \"\";\n\n    if (line[valueStart] == '\"') {\n      // quoted value\n      let valueEnd = findClosingQuote(line, valueStart + 1);\n\n      if (valueEnd < 0) {\n        throw new Error(`String missing closing quote on line ${lineNumber}`);\n      }\n\n      valueEnd += 1;\n\n      value = unquote(line.slice(valueStart, valueEnd));\n      index = valueEnd;\n    } else {\n      // no quotes\n      let valueEnd = line.indexOf(\" \", valueStart);\n\n      if (valueEnd < 0) {\n        valueEnd = line.length;\n      }\n\n      value = line.slice(valueStart, valueEnd);\n      index = valueEnd;\n    }\n\n    attributes[key] = value;\n  }\n\n  return attributes;\n}\n\nexport function parseAnimationsText(text: string): BoomSheetsAnimation[] {\n  const animations: BoomSheetsAnimation[] = [];\n\n  let lineNumber = 0;\n  let currentAnimation: BoomSheetsAnimation | undefined;\n  let currentFrame: BoomSheetsFrame | undefined;\n\n  for (let line of text.split(\"\\n\")) {\n    line = line.trim();\n    lineNumber += 1;\n\n    if (\n      line == \"\" ||\n      line.startsWith(\"#\") ||\n      line.startsWith(\"imagePath\") ||\n      line.startsWith(\"version\")\n    ) {\n      // skip\n      continue;\n    }\n\n    if (line.startsWith(\"animation \")) {\n      const attributes = parseAttributes(line, lineNumber);\n\n      const animation: BoomSheetsAnimation = {\n        state: attributes.state,\n        frames: [],\n      };\n\n      if (!attributes.state) {\n        throw new Error(\n          `Animation is missing state name on line ${lineNumber}`\n        );\n      }\n\n      animations.push(animation);\n      currentAnimation = animation;\n    } else if (line.startsWith(\"frame \") || line.startsWith(\"blank \")) {\n      if (!currentAnimation) {\n        throw new Error(\n          `No animation state to associate frame with on line ${lineNumber}`\n        );\n      }\n\n      const attributes = parseAttributes(line, lineNumber);\n\n      const frame: BoomSheetsFrame = {\n        x: parseFloat(attributes.x) || 0,\n        y: parseFloat(attributes.y) || 0,\n        w: parseFloat(attributes.w) || 0,\n        h: parseFloat(attributes.h) || 0,\n        originx: parseFloat(attributes.originx) || 0,\n        originy: parseFloat(attributes.originy) || 0,\n        flipx: parseInt(attributes.flipy) || 0,\n        flipy: parseInt(attributes.flipy) || 0,\n        duration: attributes.duration || \"\",\n        points: [],\n      };\n\n      currentAnimation.frames.push(frame);\n      currentFrame = frame;\n    } else if (line.startsWith(\"point \")) {\n      if (!currentFrame) {\n        throw new Error(\n          `No frame to associate point with on line ${lineNumber}`\n        );\n      }\n\n      const attributes = parseAttributes(line, lineNumber);\n\n      if (!attributes.label) {\n        throw new Error(`Point is missing label on line ${lineNumber}`);\n      }\n\n      const point: BoomSheetsPoint = {\n        label: attributes.label,\n        x: parseFloat(attributes.x),\n        y: parseFloat(attributes.y),\n      };\n\n      currentFrame.points.push(point);\n    } else {\n      const wordEnd = line.indexOf(\" \");\n      const word = wordEnd < 0 ? line : line.slice(0, wordEnd);\n      throw new Error(`Unexpected \"${word}\" on line ${lineNumber}`);\n    }\n  }\n\n  return animations;\n}\n\nfunction serializeObject(name: string, object: Object): string {\n  const text: string[] = [name];\n\n  for (const key in object) {\n    const value = object[key];\n\n    switch (typeof value) {\n      case \"string\":\n        if (value != \"\") {\n          text.push(\" \");\n          text.push(key);\n          text.push(\"=\");\n          text.push(quote(value));\n        }\n        break;\n      case \"number\":\n        if (value != 0) {\n          text.push(` ${key}=${value}`);\n        }\n        break;\n      case \"boolean\":\n        if (value == true) {\n          text.push(\" \");\n          text.push(key);\n          text.push(\"=1\");\n        }\n        break;\n      case \"object\":\n        if (Array.isArray(value)) {\n          // fall through to error if the value is not an array\n          break;\n        }\n      default:\n        throw new Error(`Unexpected ${typeof value} for ${key}`);\n    }\n  }\n\n  return text.join(\"\");\n}\n\nexport function serializeAnimations(animations: BoomSheetsAnimation[]): string {\n  const lines: string[] = [];\n\n  for (const animation of animations) {\n    lines.push(serializeObject(\"animation\", animation));\n\n    for (const frame of animation.frames) {\n      lines.push(serializeObject(\"frame\", frame));\n\n      for (const point of frame.points) {\n        lines.push(serializeObject(\"point\", point));\n      }\n    }\n\n    lines.push(\"\");\n  }\n\n  return lines.join(\"\\n\");\n}\n","\nvar single = exports.single = function (s) {\n  return \"'\" + s.replace(/\\\\|'/g, function (m) { return '\\\\'+m })+\"'\"\n}\n\nvar double = exports.double = function (s) {\n  return '\"' + s.replace(/\\\\|\"/g, function (m) { return '\\\\'+m })+'\"'\n}\n\nexports.quote = function (s) {\n  return  /'/.test(s) ? double(s) : single(s)\n}\n\nexports.unquote = function (s) {\n  var quote = s[0]\n  var single = quote === \"'\"\n  return s.substring(1, s.length - 1)\n      .replace(/\\\\\\\\/g, '\\\\')\n      .replace(single ? /\\\\'/g : /\\\\\"/g, quote)\n}\n\n","exports.interopDefault = function (a) {\n  return a && a.__esModule ? a : {default: a};\n};\n\nexports.defineInteropFlag = function (a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n};\n\nexports.exportAll = function (source, dest) {\n  Object.keys(source).forEach(function (key) {\n    if (\n      key === 'default' ||\n      key === '__esModule' ||\n      Object.prototype.hasOwnProperty.call(dest, key)\n    ) {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function () {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n};\n\nexports.export = function (dest, destName, get) {\n  Object.defineProperty(dest, destName, {\n    enumerable: true,\n    get: get,\n  });\n};\n","export function loadImageFile(file: File): Promise<HTMLImageElement> {\n  return new Promise((resolve, reject) => {\n    // load file as data url, then load as image\n    const reader = new FileReader();\n\n    reader.onload = function () {\n      // load image\n      const image = new Image();\n\n      image.src = reader.result as string;\n\n      image.onload = function () {\n        resolve(image);\n      };\n\n      image.onerror = function () {\n        reject(new Error(`Failed to load \"${file.name}\"`));\n      };\n    };\n\n    reader.onerror = function () {\n      reject(new Error(`Failed to load \"${file.name}: ${reader.error}\"`));\n    };\n\n    reader.readAsDataURL(file);\n  });\n}\n\nexport function loadTextFile(file: File): Promise<string> {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n\n    reader.onload = function () {\n      resolve(reader.result as string);\n    };\n\n    reader.onerror = function () {\n      reject(new Error(`Failed to load \"${file.name}: ${reader.error}\"`));\n    };\n\n    reader.readAsText(file);\n  });\n}\n","import { BoomSheetsAnimation } from \"./boomsheets-animations\";\n\nexport type InputSheet = {\n  image?: HTMLImageElement;\n  imageError?: string;\n  animations?: BoomSheetsAnimation[];\n  animationError?: string;\n};\n\nexport function resolveSingleErrorMessage(\n  sheet: InputSheet\n): string | undefined {\n  if (sheet.animationError) {\n    return sheet.animationError;\n  } else if (sheet.imageError) {\n    return sheet.imageError;\n  } else if (!sheet.animations) {\n    return \"Missing .animation file\";\n  } else if (!sheet.image) {\n    return \"Missing image file\";\n  }\n}\n","import pack from \"bin-pack\";\nimport { BoomSheetsFrame, serializeAnimations } from \"./boomsheets-animations\";\nimport groupFrames, { FrameGroup, moveGroup } from \"./group-frames\";\nimport { InputSheet } from \"./input-sheets\";\nimport { Rect, pointIntersectsRect, rectOverlaps } from \"./rect\";\n\ntype PackedFrameGroup = {\n  work: FrameGroup;\n  packed: FrameGroup;\n};\n\nexport default class FrameOrganizerWorkspace {\n  #sheet: InputSheet = {};\n  #frameGroups: PackedFrameGroup[] = [];\n  #selectedGroups: PackedFrameGroup[] = [];\n  #canvas: HTMLCanvasElement;\n  #ctx: CanvasRenderingContext2D;\n  #frameCanvas: HTMLCanvasElement;\n  #frameCtx: CanvasRenderingContext2D;\n\n  #expandingSelection = false;\n  #mouseDown = false;\n  #selectionRect?: Rect;\n  #dragStartX = 0;\n  #dragStartY = 0;\n\n  constructor(canvas: HTMLCanvasElement) {\n    this.#canvas = canvas;\n    this.#ctx = canvas.getContext(\"2d\")!;\n\n    this.#frameCanvas = document.createElement(\"canvas\");\n    this.#frameCtx = this.#frameCanvas.getContext(\"2d\")!;\n    this.#frameCtx.globalCompositeOperation = \"copy\";\n\n    let mouseX = 0;\n    let mouseY = 0;\n\n    const resolveMousePosition = (event: MouseEvent) => {\n      const boundingRect = canvas.getBoundingClientRect();\n      const inverseScale = canvas.width / boundingRect.width;\n      console.log(boundingRect.width, canvas.width, inverseScale);\n\n      mouseX = Math.floor((event.clientX - boundingRect.left) * inverseScale);\n      mouseY = Math.floor((event.clientY - boundingRect.top) * inverseScale);\n    };\n\n    this.#canvas.addEventListener(\"mousedown\", (event) => {\n      resolveMousePosition(event);\n\n      this.#mouseDown = true;\n      this.#dragStartX = mouseX;\n      this.#dragStartY = mouseY;\n\n      const selectedExisting = this.#selectedGroups.some(({ work }) =>\n        pointIntersectsRect(work, mouseX, mouseY)\n      );\n\n      if (selectedExisting) {\n        this.#expandingSelection = false;\n      } else {\n        // redefine selection\n        this.#selectedGroups = this.#frameGroups.filter(({ work }) =>\n          pointIntersectsRect(work, mouseX, mouseY)\n        );\n\n        this.#expandingSelection = this.#selectedGroups.length == 0;\n      }\n\n      this.render();\n    });\n\n    this.#canvas.addEventListener(\"mousemove\", (event) => {\n      if (!this.#mouseDown) {\n        return;\n      }\n\n      const lastX = mouseX;\n      const lastY = mouseY;\n      resolveMousePosition(event);\n\n      if (this.#expandingSelection) {\n        const minX = Math.min(mouseX, this.#dragStartX);\n        const minY = Math.min(mouseY, this.#dragStartY);\n        const maxX = Math.max(mouseX, this.#dragStartX);\n        const maxY = Math.max(mouseY, this.#dragStartY);\n\n        const rect = {\n          x: minX,\n          y: minY,\n          w: maxX - minX,\n          h: maxY - minY,\n        };\n        this.#selectionRect = rect;\n\n        this.#selectedGroups = this.#frameGroups.filter(({ work }) =>\n          rectOverlaps(rect, work)\n        );\n      } else {\n        const shiftX = mouseX - lastX;\n        const shiftY = mouseY - lastY;\n        this.#shiftSelections(shiftX, shiftY);\n      }\n\n      this.render();\n    });\n\n    this.#canvas.addEventListener(\"mouseup\", () => {\n      if (this.#mouseDown) {\n        this.#mouseDown = false;\n        this.#selectionRect = undefined;\n        this.render();\n      }\n    });\n\n    this.#canvas.addEventListener(\"keydown\", (event) => {\n      let shiftX = 0;\n      let shiftY = 0;\n\n      switch (event.code) {\n        case \"KeyA\":\n        case \"ArrowLeft\":\n          shiftX -= 1;\n          break;\n        case \"KeyD\":\n        case \"ArrowRight\":\n          shiftX += 1;\n          break;\n        case \"KeyW\":\n        case \"ArrowUp\":\n          shiftY -= 1;\n          break;\n        case \"KeyS\":\n        case \"ArrowDown\":\n          shiftY += 1;\n          break;\n      }\n\n      if (shiftX == 0 && shiftY == 0) {\n        return;\n      }\n\n      event.preventDefault();\n\n      if (event.shiftKey) {\n        this.#accordionSelections(shiftX, shiftY);\n      } else {\n        this.#shiftSelections(shiftX, shiftY);\n      }\n\n      this.render();\n    });\n  }\n\n  #shiftSelections(shiftX: number, shiftY: number) {\n    for (const { work } of this.#selectedGroups) {\n      moveGroup(work, work.x + shiftX, work.y + shiftY);\n    }\n  }\n\n  #accordionSelections(shiftX: number, shiftY: number) {\n    if (this.#selectedGroups.length == 0) {\n      return;\n    }\n\n    // x\n    this.#selectedGroups.sort((a, b) => a.work.x - b.work.x);\n\n    let lastX = this.#selectedGroups[0].work.x;\n    let currentShiftX = 0;\n\n    for (const { work } of this.#selectedGroups) {\n      if (work.x != lastX) {\n        lastX = work.x;\n        currentShiftX += shiftX;\n      }\n\n      moveGroup(work, work.x + currentShiftX, work.y);\n    }\n\n    // y\n    this.#selectedGroups.sort((a, b) => a.work.y - b.work.y);\n\n    let lastY = this.#selectedGroups[0].work.y;\n    let currentShiftY = 0;\n\n    for (const { work } of this.#selectedGroups) {\n      if (work.y != lastY) {\n        lastY = work.y;\n        currentShiftY += shiftY;\n      }\n\n      moveGroup(work, work.x, work.y + currentShiftY);\n    }\n  }\n\n  loadSheet(sheet: InputSheet) {\n    const sourceImage = sheet.image!;\n\n    this.#sheet = sheet;\n\n    const groups = groupFrames(sheet.animations!);\n    const packed = pack(\n      groups.map((group) => ({\n        width: group.w + 2,\n        height: group.h + 2,\n        group,\n      }))\n    );\n\n    this.#frameGroups = [];\n\n    for (const item of packed.items) {\n      const work = item.item.group;\n      const packed = structuredClone(work);\n\n      moveGroup(packed, item.x + 1, item.y + 1);\n\n      this.#frameGroups.push({\n        work,\n        packed,\n      });\n    }\n\n    // update canvas bounds\n    this.#canvas.width = sourceImage.width;\n    this.#canvas.height = sourceImage.height;\n    this.#frameCanvas.width = packed.width;\n    this.#frameCanvas.height = packed.height;\n\n    // create frame source\n    for (const { work, packed } of this.#frameGroups) {\n      for (let i = 0; i < packed.frames.length; i++) {\n        const sourceFrame = work.frames[i];\n        const destFrame = packed.frames[i];\n\n        const w = sourceFrame.w;\n        const h = sourceFrame.h;\n\n        this.#frameCtx.drawImage(\n          sourceImage,\n          sourceFrame.x,\n          sourceFrame.y,\n          w,\n          h,\n          destFrame.x,\n          destFrame.y,\n          w,\n          h\n        );\n      }\n    }\n\n    this.render();\n  }\n\n  render() {\n    this.#ctx.clearRect(0, 0, this.#canvas.width, this.#canvas.height);\n    this.#renderFrames(this.#ctx);\n    this.#renderOutlines();\n  }\n\n  #renderFrames(ctx: CanvasRenderingContext2D) {\n    for (const { work, packed } of this.#frameGroups) {\n      for (let i = 0; i < packed.frames.length; i++) {\n        const sourceFrame = packed.frames[i];\n        const destFrame = work.frames[i];\n\n        const w = sourceFrame.w;\n        const h = sourceFrame.h;\n\n        ctx.drawImage(\n          this.#frameCanvas,\n          sourceFrame.x,\n          sourceFrame.y,\n          w,\n          h,\n          destFrame.x,\n          destFrame.y,\n          w,\n          h\n        );\n      }\n    }\n  }\n\n  #renderOutlines() {\n    const ctx = this.#ctx;\n\n    ctx.strokeStyle = \"orange\";\n    ctx.fillStyle = \"rgba(255, 127, 0, 0.2)\";\n\n    const renderRect = (rect: Rect) => {\n      ctx.beginPath();\n      ctx.rect(rect.x + 0.5, rect.y + 0.5, rect.w, rect.h);\n      ctx.fill();\n      ctx.stroke();\n    };\n\n    for (const group of this.#frameGroups) {\n      ctx.globalAlpha = this.#selectedGroups.includes(group) ? 1.0 : 0.2;\n      renderRect(group.work);\n    }\n\n    ctx.globalAlpha = 1.0;\n\n    if (this.#selectionRect) {\n      renderRect(this.#selectionRect);\n    }\n  }\n\n  renderOutput(canvas: HTMLCanvasElement) {\n    canvas.width = this.#canvas.width;\n    canvas.height = this.#canvas.height;\n    const ctx = canvas.getContext(\"2d\")!;\n    this.#renderFrames(ctx);\n  }\n\n  serializeSheet(): string {\n    if (this.#sheet.animations) {\n      return serializeAnimations(this.#sheet.animations);\n    } else {\n      return \"\";\n    }\n  }\n}\n","\"use strict\";\n\nvar GrowingPacker = require('./packer.growing.js');\n\nmodule.exports = function(items, options) {\n\toptions = options || {};\n\tvar packer = new GrowingPacker();\n\tvar inPlace = options.inPlace || false;\n\n\t// Clone the items.\n\tvar newItems = items.map(function(item) { return inPlace ? item : { width: item.width, height: item.height, item: item }; });\n\n\tnewItems = newItems.sort(function(a, b) {\n\t\t// TODO: check that each actually HAS a width and a height.\n\t\t// Sort based on the size (area) of each block.\n\t\treturn (b.width * b.height) - (a.width * a.height);\n\t});\n\n\tpacker.fit(newItems);\n\n\tvar w = newItems.reduce(function(curr, item) { return Math.max(curr, item.x + item.width); }, 0);\n\tvar h = newItems.reduce(function(curr, item) { return Math.max(curr, item.y + item.height); }, 0);\n\n\tvar ret = {\n\t\twidth: w,\n\t\theight: h\n\t};\n\n\tif (!inPlace) {\n\t\tret.items = newItems;\n\t}\n\n\treturn ret;\n};\n","/******************************************************************************\n\nThis is a binary tree based bin packing algorithm that is more complex than\nthe simple Packer (packer.js). Instead of starting off with a fixed width and\nheight, it starts with the width and height of the first block passed and then\ngrows as necessary to accomodate each subsequent block. As it grows it attempts\nto maintain a roughly square ratio by making 'smart' choices about whether to\ngrow right or down.\n\nWhen growing, the algorithm can only grow to the right OR down. Therefore, if\nthe new block is BOTH wider and taller than the current target then it will be\nrejected. This makes it very important to initialize with a sensible starting\nwidth and height. If you are providing sorted input (largest first) then this\nwill not be an issue.\n\nA potential way to solve this limitation would be to allow growth in BOTH\ndirections at once, but this requires maintaining a more complex tree\nwith 3 children (down, right and center) and that complexity can be avoided\nby simply chosing a sensible starting block.\n\nBest results occur when the input blocks are sorted by height, or even better\nwhen sorted by max(width,height).\n\nInputs:\n------\n\n\tblocks: array of any objects that have .w and .h attributes\n\nOutputs:\n-------\n\n\tmarks each block that fits with a .fit attribute pointing to a\n\tnode with .x and .y coordinates\n\nExample:\n-------\n\n\tvar blocks = [\n\t\t{ w: 100, h: 100 },\n\t\t{ w: 100, h: 100 },\n\t\t{ w:  80, h:  80 },\n\t\t{ w:  80, h:  80 },\n\t\tetc\n\t\tetc\n\t];\n\n\tvar packer = new GrowingPacker();\n\tpacker.fit(blocks);\n\n\tfor(var n = 0 ; n < blocks.length ; n++) {\n\t\tvar block = blocks[n];\n\t\tif (block.fit) {\n\t\t\tDraw(block.fit.x, block.fit.y, block.w, block.h);\n\t\t}\n\t}\n\n\n******************************************************************************/\n\nvar GrowingPacker = function() { };\n\nGrowingPacker.prototype = {\n\n\tfit: function(blocks) {\n\t\tvar n, node, block, len = blocks.length, fit;\n\t\tvar width  = len > 0 ? blocks[0].width : 0;\n\t\tvar height = len > 0 ? blocks[0].height : 0;\n\t\tthis.root = { x: 0, y: 0, width: width, height: height };\n\t\tfor (n = 0; n < len ; n++) {\n\t\t\tblock = blocks[n];\n\t\t\tif (node = this.findNode(this.root, block.width, block.height)) {\n\t\t\t\tfit = this.splitNode(node, block.width, block.height);\n\t\t\t\tblock.x = fit.x;\n\t\t\t\tblock.y = fit.y;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfit = this.growNode(block.width, block.height);\n\t\t\t\tblock.x = fit.x;\n\t\t\t\tblock.y = fit.y;\n\t\t\t}\n\t\t}\n\t},\n\n\tfindNode: function(root, width, height) {\n\t\tif (root.used)\n\t\t\treturn this.findNode(root.right, width, height) || this.findNode(root.down, width, height);\n\t\telse if ((width <= root.width) && (height <= root.height))\n\t\t\treturn root;\n\t\telse\n\t\t\treturn null;\n\t},\n\n\tsplitNode: function(node, width, height) {\n\t\tnode.used = true;\n\t\tnode.down  = { x: node.x,         y: node.y + height, width: node.width,         height: node.height - height };\n\t\tnode.right = { x: node.x + width, y: node.y,          width: node.width - width, height: height               };\n\t\treturn node;\n\t},\n\n\tgrowNode: function(width, height) {\n\t\tvar canGrowDown  = (width  <= this.root.width);\n\t\tvar canGrowRight = (height <= this.root.height);\n\n\t\tvar shouldGrowRight = canGrowRight && (this.root.height >= (this.root.width  + width )); // attempt to keep square-ish by growing right when height is much greater than width\n\t\tvar shouldGrowDown  = canGrowDown  && (this.root.width  >= (this.root.height + height)); // attempt to keep square-ish by growing down  when width  is much greater than height\n\n\t\tif (shouldGrowRight)\n\t\t\treturn this.growRight(width, height);\n\t\telse if (shouldGrowDown)\n\t\t\treturn this.growDown(width, height);\n\t\telse if (canGrowRight)\n\t\t\treturn this.growRight(width, height);\n\t\telse if (canGrowDown)\n\t\t\treturn this.growDown(width, height);\n\t\telse\n\t\t\treturn null; // need to ensure sensible root starting size to avoid this happening\n\t},\n\n\tgrowRight: function(width, height) {\n\t\tthis.root = {\n\t\t\tused: true,\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t\twidth: this.root.width + width,\n\t\t\theight: this.root.height,\n\t\t\tdown: this.root,\n\t\t\tright: { x: this.root.width, y: 0, width: width, height: this.root.height }\n\t\t};\n\t\tvar node;\n\t\tif (node = this.findNode(this.root, width, height))\n\t\t\treturn this.splitNode(node, width, height);\n\t\telse\n\t\t\treturn null;\n\t},\n\n\tgrowDown: function(width, height) {\n\t\tthis.root = {\n\t\t\tused: true,\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t\twidth: this.root.width,\n\t\t\theight: this.root.height + height,\n\t\t\tdown:  { x: 0, y: this.root.height, width: this.root.width, height: height },\n\t\t\tright: this.root\n\t\t};\n\t\tvar node;\n\t\tif (node = this.findNode(this.root, width, height))\n\t\t\treturn this.splitNode(node, width, height);\n\t\telse\n\t\t\treturn null;\n\t}\n\n};\n\nmodule.exports = GrowingPacker;\n\n","import { BoomSheetsAnimation, BoomSheetsFrame } from \"./boomsheets-animations\";\nimport { rectOverlaps } from \"./rect\";\n\nexport type FrameGroup = {\n  x: number;\n  y: number;\n  w: number;\n  h: number;\n  frames: BoomSheetsFrame[];\n};\n\nfunction updateBounds(group: FrameGroup) {\n  const firstFrame = group.frames[0];\n  let minX = firstFrame.x;\n  let minY = firstFrame.y;\n  let maxX = firstFrame.x + firstFrame.w;\n  let maxY = firstFrame.y + firstFrame.h;\n\n  for (let i = 1; i < group.frames.length; i++) {\n    const frame = group.frames[i];\n    minX = Math.min(minX, frame.x);\n    minY = Math.min(minY, frame.y);\n    maxX = Math.max(maxX, frame.x + frame.w);\n    maxY = Math.max(maxY, frame.y + frame.h);\n  }\n\n  group.x = minX;\n  group.y = minY;\n  group.w = maxX - minX;\n  group.h = maxY - minY;\n}\n\n// create a single group, removes frames from the passed list\nfunction takeGroup(frames: BoomSheetsFrame[]): FrameGroup {\n  const group: FrameGroup = {\n    x: 0,\n    y: 0,\n    w: 0,\n    h: 0,\n    frames: [frames.pop()!],\n  };\n\n  updateBounds(group);\n\n  for (let i = frames.length - 1; i >= 0; i--) {\n    const frame = frames[i];\n\n    if (!rectOverlaps(group, frame)) {\n      // failed the primary bounding box\n      continue;\n    }\n\n    if (!group.frames.some((f) => rectOverlaps(f, frame))) {\n      // failed against internal bounding boxes\n      continue;\n    }\n\n    // take frame by swap remove\n    frames[i] = frames[frames.length - 1];\n    frames.pop();\n\n    group.frames.push(frame);\n    updateBounds(group);\n  }\n\n  return group;\n}\n\nexport function moveGroup(group: FrameGroup, x: number, y: number) {\n  const shiftX = x - group.x;\n  const shiftY = y - group.y;\n\n  group.x = x;\n  group.y = y;\n\n  for (const frame of group.frames) {\n    frame.x += shiftX;\n    frame.y += shiftY;\n  }\n}\n\nexport default function groupFrames(\n  animations: BoomSheetsAnimation[]\n): FrameGroup[] {\n  const frames = animations.flatMap((animation) => animation.frames);\n  const groups: FrameGroup[] = [];\n\n  while (frames.length > 0) {\n    groups.push(takeGroup(frames));\n  }\n\n  return groups;\n}\n","export type Rect = { x: number; y: number; w: number; h: number };\n\nexport function rectOverlaps(a: Rect, b: Rect) {\n  const aIsLeft = a.x + a.w <= b.x;\n  const aIsRight = a.x >= b.x + b.w;\n  const aIsAbove = a.y + a.h <= b.y;\n  const aIsBelow = a.y >= b.y + b.h;\n\n  return !(aIsLeft || aIsRight || aIsAbove || aIsBelow);\n}\n\nexport function pointIntersectsRect(rect: Rect, x: number, y: number) {\n  return (\n    x >= rect.x && x <= rect.x + rect.w && y >= rect.y && y <= rect.y + rect.h\n  );\n}\n"],"names":[],"version":3,"file":"index.b71e74eb.js.map","sourceRoot":"/__parcel_source_root/"}